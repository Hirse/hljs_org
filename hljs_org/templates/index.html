{% extends "base.html" %}
{% load static from staticfiles %}

{% block title %}highlight.js{% endblock %}

{% block codestyle %}
{% for s in styles %}<link class="codestyle" rel="{% if s != style %}alternate {% endif %}stylesheet" href="{% static 'styles/' %}{{ s }}.css">
{% endfor %}
{% endblock %}
{% block highlightinit %}
<script>
  function initSnippet() {
    var snippet = $('#snippet pre code');
    hljs.highlightBlock(snippet.get(0));
    var style = $('#style-link').text();
    $('.codestyle').each(function(i, e) {
      e.rel = 'stylesheet';
      e.disabled = !e.href.match(style + '\\.css$');
    });
    $('#language-link').html(snippet.get(0).result.language);
    $('#control a').click(function(e) {
      e.preventDefault();
      $('#snippet').load(this.href, initSnippet);
    });
  }

  $(document).ready(function(){
    // hljs.initHighlighting();
    initSnippet();
  });
</script>
{% endblock %}

{% block header %}
  <h1>highlight.js</h1>
  <p>Syntax highlighting for the Web</p>
{% endblock %}

{% block content %}
<div id="snippet">
{% include 'snippet.html' %}
</div>
<div id="description">
  <ul id="features" class="ui">
    <li>{{ counts.languages }} languages and {{ counts.styles }} styles
        (<a href="{% static 'demo/' %}">live demo</a>)
    <li>automatic language detection
    <li>multi-language code highlighting
    <li>available for node.js
    <li>works with any markup
    <li>compatible with any js framework
  </ul>
  <div id="download">
    <p><a href="{% url 'download' %}">Get version {{ version }}</a>
  </div>
  <p id="usage"><a href="{% url 'usage' %}">Usage</a>
</div>
<div id="contribute">
  <p><a href="{% url 'contribute' %}">Contribute</a>
</div>
<div id="news">
  <div id="social">
    <p><a href="https://twitter.com/highlightjs"><img src="{% static 'twitter.png' %}">@highlightjs</a>
  </div>
  <h2>News</h2>
  <ol>
    {% for item in news %}
    <li id="news-{{ item.pk }}">
      <div class="time"><a href="#news-{{ item.pk }}">{{ item.created|date:'Y-m-d' }}</a></div>
      <div class="text">{{ item.html }}</div>
    {% endfor %}
  </ol>
</div>
{% endblock %}
